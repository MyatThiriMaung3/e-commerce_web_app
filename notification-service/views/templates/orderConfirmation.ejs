<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
    <style>
        body { font-family: sans-serif; margin: 20px; color: #333; }
        .container { border: 1px solid #eee; padding: 20px; max-width: 600px; margin: auto; }
        h1 { color: #0056b3; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .total { font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Order Confirmation - #<%= orderData._id || orderData.orderId %></h1>
        <p>Hello <%= userData.name || 'Customer' %>,</p>
        <p>Thank you for your order! Here are the details:</p>

        <h2>Order Summary</h2>
        <table>
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                <% orderData.items.forEach(item => { %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.quantity %></td>
                        <td>$<%= item.price.toFixed(2) %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>

        <h2>Totals</h2>
        <p>Subtotal: $<%= (orderData.totalAmount - orderData.tax - (orderData.shippingFee || 0) + (orderData.discountAmount || 0)).toFixed(2) %></p>
        <% if (orderData.discountAmount && orderData.discountAmount > 0) { %>
            <p>Discount Applied (<%= orderData.discountCode || '-' %>): -$<%= orderData.discountAmount.toFixed(2) %></p>
        <% } %>
        <p>Tax: $<%= orderData.tax.toFixed(2) %></p>
        <% if (orderData.shippingFee && orderData.shippingFee > 0) { %>
            <p>Shipping: $<%= orderData.shippingFee.toFixed(2) %></p>
        <% } %>
        <p class="total">Final Total: $<%= orderData.finalTotalAmount.toFixed(2) %></p>

        <h2>Shipping Address</h2>
        <p>
            <%= orderData.address.street %><br>
            <%= orderData.address.city %>, <%= orderData.address.state %> <%= orderData.address.zipCode %><br>
            <%= orderData.address.country %>
        </p>

        <p>We'll notify you when your order ships.</p>
        <p>Thanks,<br>The Team</p>
    </div>
</body>
</html> 