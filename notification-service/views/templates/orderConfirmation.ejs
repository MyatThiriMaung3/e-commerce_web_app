<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
    <style>
        body { font-family: sans-serif; margin: 20px; color: #333; }
        .container { border: 1px solid #eee; padding: 20px; max-width: 600px; margin: auto; }
        h1 { color: #0056b3; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .total { font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Order Confirmation - #<%= orderNumber || _id %></h1>
        <p>Hello <%= typeof customerName !== 'undefined' && customerName ? customerName : 'Customer' %>,</p>
        <p>Thank you for your order! Here are the details:</p>

        <h2>Order Summary</h2>
        <table>
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                <% (items || []).forEach(item => { %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.quantity %></td>
                        <td>$<%= item.price ? item.price.toFixed(2) : 'N/A' %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>

        <h2>Totals</h2>
        <p>Subtotal: $<%= typeof subTotalAmount !== 'undefined' ? subTotalAmount.toFixed(2) : 'N/A' %></p>
        <% if (typeof discountAmount !== 'undefined' && discountAmount > 0) { %>
            <p>Discount Applied (<%= discountCode || '-' %>): -$<%= discountAmount.toFixed(2) %></p>
        <% } %>
        <p>Tax: $<%= typeof taxAmount !== 'undefined' ? taxAmount.toFixed(2) : 'N/A' %></p>
        <% if (typeof shippingFee !== 'undefined' && shippingFee > 0) { %>
            <p>Shipping: $<%= shippingFee.toFixed(2) %></p>
        <% } %>
        <p class="total">Final Total: $<%= typeof finalTotalAmount !== 'undefined' ? finalTotalAmount.toFixed(2) : 'N/A' %></p>

        <h2>Shipping Address</h2>
        <% if (shippingAddress) { %>
        <p>
            <%= shippingAddress.fullName || '' %><br>
            <%= shippingAddress.addressLine || shippingAddress.street || '' %><br>
            <%= shippingAddress.city || '' %>, <%= shippingAddress.state || '' %> <%= shippingAddress.zipCode || shippingAddress.zip || '' %><br>
            <%= shippingAddress.country || '' %>
        </p>
        <% } else { %>
        <p>Shipping address not provided.</p>
        <% } %>

        <p>We'll notify you when your order ships.</p>
        <p>Thanks,<br>The Team</p>
    </div>
</body>
</html> 